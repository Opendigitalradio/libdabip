arm-debug:
  script:
    - git submodule update --init common
    - cd build
    - CXX=clang++ cmake .. -DCMAKE_BUILD_TYPE=Debug
    - make -j$(nproc)
  tags:
    - arm
  artifacts:
    paths:
      - build/cute-reports

arm-release:
  script:
    - git submodule update --init common
    - cd build
    - CXX=clang++ cmake .. -DCMAKE_BUILD_TYPE=Release
    - make -j$(nproc)
  tags:
    - arm
  artifacts:
    paths:
      - build/cute-reports
      - build/products/Release/lib
      - build/products/Release/bin

x86_64-debug:
  script:
    - git submodule update --init common
    - cd build
    - CXX=clang++ cmake .. -DCMAKE_BUILD_TYPE=Debug
    - make -j$(nproc)
  tags:
    - x86_64
  artifacts:
    paths:
      - build/cute-reports

x86_64-release:
  script:
    - git submodule update --init common
    - cd build
    - CXX=clang++ cmake .. -DCMAKE_BUILD_TYPE=Release
    - make -j$(nproc)
  tags:
    - x86_64
  artifacts:
    paths:
      - build/cute-reports
      - build/products/Release/lib
      - build/products/Release/bin

doc-internal:
  script:
    - git submodule update --init common
    - cd build
    - cmake .. -DBUILD_DOCUMENTATION_ONLY=ON -DBUILD_INTERNAL_DOCUMENTATION=ON
    - make
    - cd doc/latex
    - make
  tags:
    - x86_64
  artifacts:
    paths:
      - build/doc/html
      - build/doc/latex/refman.pdf

doc-public:
  script:
    - git submodule update --init common
    - cd build
    - cmake .. -DBUILD_DOCUMENTATION_ONLY=ON -DBUILD_INTERNAL_DOCUMENTATION=OFF
    - make
    - cd doc/latex
    - make
  tags:
    - x86_64
  artifacts:
    paths:
      - build/doc/html
      - build/doc/latex/refman.pdf

